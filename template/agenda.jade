extends base.jade
mixin topic-modal(id, title, summary,speaker)
  .modal.fade(id="topic-"+id): .modal-dialog: .modal-content
    .modal-header
      button.close(type="button",data-dismiss="modal") &times;
      h4.modal-title= title
    .modal-body
      .avatar-agenda-popup(style="background-image:url(/img/speaker/"+speaker.id+".jpg)")
      h2.agenda-popup
        span= speaker.name 
        span #[br] #[small= speaker.title] #[small /] #[small= speaker.inst]
      p.agenda-popup= speaker.desc
    .modal-footer
      .btn.btn-default(data-dismiss="modal") Close

block content
  .section-heading: .container= aux.heading.agenda
  .container
    h3 
      small.pull-right
        .label.label-danger.label-en en: #[span= aux.inEn]
        .label.label-primary.label-zh zh: #[span= aux.inZh]
      | Day 1 #[small 8/21]
    table#agenda.table.table-bordered.text-center
      tr
        th.text-center= aux.agenda.time
        th.text-center= aux.agenda.speaker
        th.text-center= aux.agenda.topic
      each slot in agenda
        if !slot.speaker
          - trclass = "break"
        else
          - trclass = ""
        tr(class=trclass)
          td= slot.time
          if slot.speaker && slot.speaker.length
            td 
              each speaker in slot.speaker
                span= speaker.name
          else if slot.speaker
            td= slot.speaker.name
          if !slot.speaker
            td.text-center(colspan="2")
              span= slot.topic
              span= slot.lang
          else
            td
              +topic-modal(slot.speaker.id, slot.topic, slot.summary, slot.speaker)
              span.clickable-topic(onclick="$('#topic-"+slot.speaker.id+"').modal('show')")= slot.topic
              //-span= slot.topic
              if slot.lang
                each lc in slot.lang
                  .label.label-danger.pull-right(class="label-"+lc)= lc
    h3 Day 2 #[small 8/22]
    table#agenda.table.table-bordered.text-center
      tr
        th.text-center(style="width:130px")= aux.agenda.time
        th.text-center= aux.agenda.topic
      tr
        td 09:30 - 17:45
        td g0v hackathon

    h3 Day 3 #[small 8/23]
    table#agenda.table.table-bordered.text-center
      tr
        th.text-center(style="width:130px")= aux.agenda.time
        th.text-center= aux.agenda.topic
      tr
        td 10:30 - 15:35
        td g0v hackathon
      tr
        td 16:05 - 17:05
        td= aux.agenda.demo
