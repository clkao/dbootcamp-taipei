extends base.jade
mixin topic-modal(id, title, summary, speaker)
  if !speaker.id
    - speaker = speaker[0]
  .modal.fade(id=id): .modal-dialog: .modal-content
    .modal-header
      button.close(type="button",data-dismiss="modal") &times;
      h4.modal-title= title
    .modal-body
      .avatar-agenda-popup(style="background-image:url(/img/speaker/"+speaker.id+".jpg)")
      h2.agenda-popup
        span= speaker.name 
        span #[br] #[small= speaker.title] #[small /] #[small= speaker.inst]
      hr
      p.agenda-popup!= speaker.desc
    .modal-footer
      .btn.btn-default(data-dismiss="modal") Close

block content
  .section-heading: .container= aux.heading.agenda
  .container-agenda
    h3 
      small.pull-right
        .label.label-danger.label-en en: #[span= aux.inEn]
        .label.label-primary.label-zh zh: #[span= aux.inZh]
      | Day 1 #[small 8/21]
    .flextable
      .slot.head
        .cell-time= aux.agenda.time
        .cell-speaker= aux.agenda.speaker
        .cell-topic= aux.agenda.topic
      each slot in agenda
        if !slot.speaker
          - trclass = "break"
        else
          - trclass = ""
        .slot(class=trclass)
          .cell-time= slot.time
          if slot.speaker && slot.speaker.length
            .cell-speaker 
              each speaker in slot.speaker
                +topic-modal("speaker-"+speaker.id, "", "", speaker)
                span.clickable-link(onclick="$('#speaker-"+speaker.id+"').modal('show')")= speaker.name
          else if slot.speaker
            .cell-speaker
              +topic-modal("speaker-"+slot.speaker.id, "", "", slot.speaker)
              span.clickable-link(onclick="$('#speaker-"+slot.speaker.id+"').modal('show')")= slot.speaker.name
          if !slot.speaker
            .cell-break.text-center(colspan="2")
              span= slot.topic
          else
            .cell-topic
              span= slot.topic
              if slot.lang
                each lc in slot.lang
                  .label.label-danger.pull-right(class="label-"+lc)= lc

    h3 Day 2 #[small 8/22]
    .flextable
      .slot.head.activity
        .cell-time= aux.agenda.time
        .cell-activity= aux.agenda.topic
      .slot.activity
        .cell-time 09:30 - 17:45
        .cell-activity g0v hackathon

    h3 Day 3 #[small 8/23]
    .flextable
      .slot.head.activity
        .cell-time= aux.agenda.time
        .cell-activity= aux.agenda.topic
      .slot.activity
        .cell-time 10:30 - 15:35
        .cell-activity g0v hackathon
      .slot.activity
        .cell-time 16:05 - 17:05
        .cell-activity= aux.agenda.demo
    br
    br
